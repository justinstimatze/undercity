#!/bin/bash
echo "Running Biome on staged files..."

# Check and fix staged files
pnpm exec biome check --write --staged --no-errors-on-unmatched --files-ignore-unknown=true

# Re-stage any files that were modified
git update-index --again

echo "Biome check complete!"

# TypeScript check
echo "Running TypeScript check..."
pnpm exec tsc --noEmit || exit 1
echo "TypeScript check complete!"

# Build check
echo "Running build..."
pnpm build || exit 1
echo "Build complete!"

# Run tests with coverage
echo "Running tests with coverage..."
pnpm test:coverage 2>&1 || exit 1
echo "Tests complete!"
